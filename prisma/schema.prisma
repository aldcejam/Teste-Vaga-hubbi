generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
 

model Retailer {  
  id           String    @id @db.Uuid 
  name         String    @unique
  products     Product[] 
  affiliate    Affiliate?
}

model Affiliate {
  id           String    @id @db.Uuid
  name         String    @unique
  products     Product[]
  retailerId   String    @db.Uuid @unique
  retailer     Retailer  @relation(fields: [retailerId], references: [id])
}

model Product {
  id              String    @id @db.Uuid
  retailerId      String    @db.Uuid
  affiliateId     String?   @db.Uuid
  retailer        Retailer  @relation(fields: [retailerId], references: [id])
  affiliate       Affiliate? @relation(fields: [affiliateId], references: [id])
}
